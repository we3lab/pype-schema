{
    "nodes": [
      "IntermediateTanks",
      "GravitySandFilter",
      "ROFeedPump",
      "CartridgeFilters",
      "HPPump",
      "SWRO", 
      "BWTank", 
      "BWPumps",
      "AirBlower", 
      "ERI", 
      "CirculationPump", 
      "OutfallMixingBox", 
      "SuckBackTank"
    ],
    "connections": [
      "IntermediateTanks2GravitySandFilter",
      "GravitySandFilter2ROFeedPump",
      "ROFeedPump2CartridgeFilters",
      "ROFeedPump2BWTank",
      "CartridgeFilters2HPPump",
      "CartridgeFilters2ERI",
      "HPPump2SWRO",
      "BWTank2BWPumps",
      "BWPumps2GravitySandFilter",
      "SWRO2ERI",
      "SWRO2SuckBackTank", 
      "ERI2CirculationPump",
      "ERI2OutfallMixingBox", 
      "CirculationPump2SWRO", 
      "AirBlower2GravitySandFilter"
    ],
    "virtual_tags": {
      "ROMembraneMassBalance": {
        "tags": ["PT_200A_Tags.Q_RO_Feed_PV", "FIT_400_001A_P.PV", "FIT_400_002A_P.PV"],
        "operations": "lambda x, y, z: (x-z-y)/(x+1e-6)",
        "units": "MGD"
      }, 
      "FlowLostWithinIntermediateTanksAndFilters": {
        "tags": ["FIT_200_001A_P.PV", "Q_400_002A"],
        "operations": "lambda x, y: (x - y) / ( x + 1e-8 )",
        "units": "MGD"
      }
    },
    "IntermediateTanks": {
      "type": "Tank",
      "num_units": 2,
      "elevation (meters)": null,
      "volume (cubic meters)": null,
      "contents": "Brine",
      "tags": {
        "FIT_200_001A_P.PV": {
          "type": "InFlow",
          "contents": "Brine",
          "units": "MGD"
        }
      }
    },
    "GravitySandFilter": {
      "type": "Filtration",
      "contents": "Brine",
      "volume (cubic meters)": null,
      "num_units": 7,
      "flowrate": {
        "min": null,
        "max": null,
        "avg": null,
        "units": "MGD",
        "tags": {
        }
      }
    },
    "ROFeedPump": {
      "type": "Pump",
      "pump_type": null,
      "contents": "Brine",
      "num_units": 1,
      "horsepower": null,
      "flowrate": {
        "max": null,
        "min": null,
        "avg": null,
        "units": "MGD"
      },
      "tags": {
        "Q_400_002A": {
          "type": "OutFlow",
          "contents": "Brine",
          "units": "GPM"
        }
      }
    },
    "CartridgeFilters": {
      "type": "Filtration",
      "contents": "Brine",
      "volume (cubic meters)": null,
      "num_units": 3,
      "flowrate": {
        "min": null,
        "max": null,
        "avg": null,
        "units": "MGD",
        "tags": {
          "PT_200A_Tags.Q_Filtrate_PV":{ 
            "type": "OutFlow",
            "contents": "Brine",
            "units": "GPM"
          }
        }
      }
    },
    "HPPump": {
      "type": "Pump",
      "pump_type": null,
      "contents": "Brine",
      "num_units": 1,
      "horsepower": null,
      "flowrate": {
        "max": null,
        "min": null,
        "avg": null,
        "units": "MGD"
      },
      "tags": {
      }
    },
    "SWRO": {
      "type": "ROMembrane",
      "contents": "Brine",
      "volume (cubic meters)": null,
      "num_units": 3,
      "area": null,
      "permeability": null,
      "selectivity": null,
      "flowrate": {
        "min": null,
        "max": null,
        "avg": null,
        "units": "MGD",
        "tags": {}
      }, 
      "tags": {
        "PT_200A_Tags.Q_RO_Feed_PV": {
          "type": "InFlow",
          "contents": "Brine",
          "units": "GPM"
        }
      }
    },
    "BWTank": {
      "type": "Tank",
      "elevation (meters)": null,
      "volume (cubic meters)": null,
      "contents": "Brine",
      "num_units": 1,
      "tags": {
      }
    },
    "BWPumps": {
      "type": "Pump",
      "pump_type": null,
      "contents": "Brine",
      "num_units": 1,
      "horsepower": null,
      "flowrate": {
        "max": null,
        "min": null,
        "avg": null,
        "units": "MGD"
      },
      "tags": {
      }
    },
    "AirBlower": {
      "type": "Pump",
      "pump_type": "AirBlower",
      "contents": "Brine",
      "num_units": 1,
      "horsepower": null,
      "flowrate": {
        "max": null,
        "min": null,
        "avg": null,
        "units": "MGD"
      },
      "tags": {
      }
    },
    "ERI": {
      "type": "Pump",
      "pump_type": "ERI",
      "contents": "Brine",
      "num_units": 1,
      "horsepower": null,
      "flowrate": {
        "max": null,
        "min": null,
        "avg": null,
        "units": "MGD"
      },
      "tags": {
      }
    },
    "CirculationPump": {
      "type": "Pump",
      "pump_type": null,
      "contents": "Brine",
      "num_units": 1,
      "horsepower": null,
      "flowrate": {
        "max": null,
        "min": null,
        "avg": null,
        "units": "MGD"
      },
      "tags": {
      }
    },
    "OutfallMixingBox": {
      "type": "Tank",
      "elevation (meters)": null,
      "volume (cubic meters)": null,
      "contents": "Brine",
      "num_units": 1,
      "tags": {
      }
    },
    "SuckBackTank": {
      "type": "Tank",
      "elevation (meters)": null,
      "volume (cubic meters)": null,
      "contents": "Brine",
      "num_units": 1,
      "tags": {
      }
    },
    "IntermediateTanks2GravitySandFilter": {
      "type": "Pipe",
      "source": "IntermediateTanks",
      "destination": "GravitySandFilter",
      "contents": "Brine",
      "bidirectional": true,
      "tags": {}
    },
    "GravitySandFilter2ROFeedPump": {
      "type": "Pipe",
      "source": "GravitySandFilter",
      "destination": "ROFeedPump",
      "contents": "Brine",
      "bidirectional": true,
      "tags": {}
    },
    "ROFeedPump2CartridgeFilters": {
      "type": "Pipe",
      "source": "ROFeedPump",
      "destination": "CartridgeFilters",
      "contents": "Brine",
      "bidirectional": true,
      "tags": {}, 
      "virtual_tags": {
        "PartialOutFlowROFeedPump2CartridgeFilters": {
            "tags": ["Q_400_002A", "FIT_200_004A_P.PV"],
            "operations": "lambda x, y: x - y",
            "units": "GPM"
        }
      }
    },
    "ROFeedPump2BWTank": {
      "type": "Pipe",
      "source": "ROFeedPump",
      "destination": "BWTank",
      "contents": "Brine",
      "bidirectional": true,
      "tags": {
        "FIT_200_004A_P.PV": {
          "type": "Flow",
          "contents": "Brine",
          "units": "GPM"
        }
      }
    },
    "CartridgeFilters2HPPump": {
      "type": "Pipe",
      "source": "CartridgeFilters",
      "destination": "HPPump",
      "contents": "Brine",
      "bidirectional": true,
      "tags": {}, 
      "virtual_tags": {
        "PartialOutFlowCartridgeFilters2HPPump": {
            "tags": ["PT_200A_Tags.Q_Filtrate_PV", "Q_400_001A_P.PV"],
            "operations": "lambda x, y: x - y",
            "units": "GPM"
        }
      }
    },
    "CartridgeFilters2ERI": {
      "type": "Pipe",
      "source": "CartridgeFilters",
      "destination": "ERI",
      "contents": "Brine",
      "bidirectional": true,
      "tags": {
        "Q_400_001A_P.PV": {
          "type": "Flow",
          "contents": "Brine",
          "units": "GPM"
        }
      }
    },
    "HPPump2SWRO": {
      "type": "Pipe",
      "source": "HPPump",
      "destination": "SWRO",
      "contents": "Brine",
      "bidirectional": true,
      "tags": {}
    },
    "BWTank2BWPumps": {
      "type": "Pipe",
      "source": "BWTank",
      "destination": "BWPumps",
      "contents": "Brine",
      "bidirectional": true,
      "tags": {}
    },
    "BWPumps2GravitySandFilter": {
      "type": "Pipe",
      "source": "BWPumps",
      "destination": "GravitySandFilter",
      "contents": "Brine",
      "bidirectional": true,
      "tags": {
        "FIT_200_002A_P.PV": {
          "type": "Flow",
          "contents": "Brine",
          "units": "MGD"
        }
      }
    },
    "SWRO2ERI": {
      "type": "Pipe",
      "source": "SWRO",
      "destination": "ERI",
      "contents": "Brine",
      "bidirectional": true,
      "tags": {}
    },
    "SWRO2SuckBackTank": {
      "type": "Pipe",
      "source": "SWRO",
      "destination": "SuckBackTank",
      "contents": "Brine",
      "bidirectional": true,
      "tags": {
        "FIT_400_002A_P.PV": {
          "type": "Flow",
          "contents": "Brine",
          "units": "GPM"
        }
      }
    },
    "ERI2CirculationPump": {
      "type": "Pipe",
      "source": "ERI",
      "destination": "CirculationPump",
      "contents": "Brine",
      "bidirectional": true,
      "tags": {
        "Q_400_001A_P.PV": {
          "type": "Flow",
          "contents": "Brine",
          "units": "GPM"
        }
      }
    },
    "ERI2OutfallMixingBox": {
      "type": "Pipe",
      "source": "ERI",
      "destination": "OutfallMixingBox",
      "contents": "Brine",
      "bidirectional": true,
      "tags": {
        "FIT_400_001A_P.PV": {
          "type": "Flow",
          "contents": "Brine",
          "units": "GPM"
        }
      }
    },
    "CirculationPump2SWRO": {
      "type": "Pipe",
      "source": "CirculationPump",
      "destination": "SWRO",
      "contents": "Brine",
      "bidirectional": true,
      "tags": {}
    }, 
    "AirBlower2GravitySandFilter": {
      "type": "Pipe",
      "source": "AirBlower",
      "destination": "GravitySandFilter",
      "contents": "Brine",
      "bidirectional": true,
      "tags": {}
    }     
  }
  