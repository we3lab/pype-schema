<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>JSON Representation &mdash; PyPES 0.6.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="_static/css/custom.css" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Advanced Features" href="advanced.html" />
    <link rel="prev" title="Getting Started" href="hello.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            PyPES
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">README</a></li>
<li class="toctree-l1"><a class="reference internal" href="hello.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">JSON Representation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#representing-nodes">Representing Nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#representing-connections">Representing Connections</a></li>
<li class="toctree-l2"><a class="reference internal" href="#representing-tags">Representing Tags</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#basic-tag">Basic <code class="docutils literal notranslate"><span class="pre">Tag</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#virtualtag"><code class="docutils literal notranslate"><span class="pre">VirtualTag</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#tagtype-enum"><code class="docutils literal notranslate"><span class="pre">TagType</span></code> Enum</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#contentstype-enum"><code class="docutils literal notranslate"><span class="pre">ContentsType</span></code> Enum</a></li>
<li class="toctree-l2"><a class="reference internal" href="#num-units-attribute"><code class="docutils literal notranslate"><span class="pre">num_units</span></code> Attribute</a></li>
<li class="toctree-l2"><a class="reference internal" href="#elevation-attribute"><code class="docutils literal notranslate"><span class="pre">elevation</span></code> Attribute</a></li>
<li class="toctree-l2"><a class="reference internal" href="#volume-attribute"><code class="docutils literal notranslate"><span class="pre">volume</span></code> Attribute</a></li>
<li class="toctree-l2"><a class="reference internal" href="#flow-rate-attribute"><code class="docutils literal notranslate"><span class="pre">flow_rate</span></code> Attribute</a></li>
<li class="toctree-l2"><a class="reference internal" href="#gen-capacity-attribute"><code class="docutils literal notranslate"><span class="pre">gen_capacity</span></code> Attribute</a></li>
<li class="toctree-l2"><a class="reference internal" href="#heating-values-attribute"><code class="docutils literal notranslate"><span class="pre">heating_values</span></code> Attribute</a></li>
<li class="toctree-l2"><a class="reference internal" href="#capacity-attribute"><code class="docutils literal notranslate"><span class="pre">capacity</span></code> Attribute</a></li>
<li class="toctree-l2"><a class="reference internal" href="#discharge-rate-attribute"><code class="docutils literal notranslate"><span class="pre">discharge_rate</span></code> Attribute</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="advanced.html">Advanced Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="CONTRIBUTING.html">Contribution Agreement</a></li>
<li class="toctree-l1"><a class="reference internal" href="LICENSE.html">LICENSE</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Class Hierarchy</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="connection.html">connection</a></li>
<li class="toctree-l1"><a class="reference internal" href="node.html">node</a></li>
<li class="toctree-l1"><a class="reference internal" href="tag.html">tag</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">JSON Parsing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="parse_json.html">parse_json</a></li>
<li class="toctree-l1"><a class="reference internal" href="units.html">units</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Miscellaneous</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="logbook.html">logbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="operations.html">operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualize.html">visualize</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">PyPES</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">JSON Representation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/json_rep.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <nav class="contents" id="contents" role="doc-toc">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#json-representation" id="id28">JSON Representation</a></p>
<ul>
<li><p><a class="reference internal" href="#representing-nodes" id="id29">Representing Nodes</a></p></li>
<li><p><a class="reference internal" href="#representing-connections" id="id30">Representing Connections</a></p></li>
<li><p><a class="reference internal" href="#representing-tags" id="id31">Representing Tags</a></p>
<ul>
<li><p><a class="reference internal" href="#basic-tag" id="id32">Basic <code class="docutils literal notranslate"><span class="pre">Tag</span></code></a></p></li>
<li><p><a class="reference internal" href="#virtualtag" id="id33"><code class="docutils literal notranslate"><span class="pre">VirtualTag</span></code></a></p></li>
<li><p><a class="reference internal" href="#tagtype-enum" id="id34"><code class="docutils literal notranslate"><span class="pre">TagType</span></code> Enum</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#contentstype-enum" id="id35"><code class="docutils literal notranslate"><span class="pre">ContentsType</span></code> Enum</a></p></li>
<li><p><a class="reference internal" href="#num-units-attribute" id="id36"><code class="docutils literal notranslate"><span class="pre">num_units</span></code> Attribute</a></p></li>
<li><p><a class="reference internal" href="#elevation-attribute" id="id37"><code class="docutils literal notranslate"><span class="pre">elevation</span></code> Attribute</a></p></li>
<li><p><a class="reference internal" href="#volume-attribute" id="id38"><code class="docutils literal notranslate"><span class="pre">volume</span></code> Attribute</a></p></li>
<li><p><a class="reference internal" href="#flow-rate-attribute" id="id39"><code class="docutils literal notranslate"><span class="pre">flow_rate</span></code> Attribute</a></p></li>
<li><p><a class="reference internal" href="#gen-capacity-attribute" id="id40"><code class="docutils literal notranslate"><span class="pre">gen_capacity</span></code> Attribute</a></p></li>
<li><p><a class="reference internal" href="#heating-values-attribute" id="id41"><code class="docutils literal notranslate"><span class="pre">heating_values</span></code> Attribute</a></p></li>
<li><p><a class="reference internal" href="#capacity-attribute" id="id42"><code class="docutils literal notranslate"><span class="pre">capacity</span></code> Attribute</a></p></li>
<li><p><a class="reference internal" href="#discharge-rate-attribute" id="id43"><code class="docutils literal notranslate"><span class="pre">discharge_rate</span></code> Attribute</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="json-representation">
<span id="json-rep"></span><h1><a class="toc-backref" href="#id28" role="doc-backlink">JSON Representation</a><a class="headerlink" href="#json-representation" title="Permalink to this heading"></a></h1>
<p>The PyPES JSON file format is broken into four categories at the top level:</p>
<ol class="arabic simple">
<li><p>String <code class="docutils literal notranslate"><span class="pre">Node</span></code> ID list</p></li>
<li><p>String <code class="docutils literal notranslate"><span class="pre">Connection</span></code> ID list</p></li>
<li><p>String <code class="docutils literal notranslate"><span class="pre">VirtualTag</span></code> ID list</p></li>
<li><p>Key-value entries for each of actual <a class="reference internal" href="node.html#node"><span class="std std-ref">node</span></a> or <a class="reference internal" href="connection.html#connection"><span class="std std-ref">connection</span></a> objects (see <a class="reference internal" href="#node-rep"><span class="std std-ref">Representing Nodes</span></a> and <a class="reference internal" href="#conn-rep"><span class="std std-ref">Representing Connections</span></a>),
where keys are the string IDs from 1-3</p></li>
</ol>
<p>Here is the simplest example of this structure, with two nodes, one connection, and no virtual tags:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;nodes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;PowerGrid&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;WWTP&quot;</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;connections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;GridToPlant&quot;</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;virtual_tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">    </span><span class="nt">&quot;PowerGrid&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Network&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;Electricity&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;NaturalGas&quot;</span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">        </span><span class="nt">&quot;nodes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">        </span><span class="nt">&quot;connections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;WWTP&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;input_contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;UntreatedSewage&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Electricity&quot;</span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;output_contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;TreatedSewage&quot;</span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">        </span><span class="nt">&quot;nodes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">        </span><span class="nt">&quot;connections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;GridToPlant&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Wire&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PowerGrid&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;destination&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;WWTP&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Electricity&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;bidirectional&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>For integration with data-driven modeling applications, <code class="docutils literal notranslate"><span class="pre">Tag</span></code> objects that represent real-world sensors can
be added to any other object. As a basica example, if there was an electrical meter with a database column name
“grid_to_plant_kW”, then we would add the following tag specification to the connection:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="nt">&quot;GridToPlant&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Wire&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PowerGrid&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;destination&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;WWTP&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Electricity&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;bidirectional&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;grid_to_plant_kW&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Flow&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;units&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;kWh&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Electricity&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;totalized&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>One other thing to note about this connection is that “bidirectional” is set to <code class="docutils literal notranslate"><span class="pre">true</span></code>.
In the real world this means that electricity exports are allowed. PyPES will also take this
into account (e.g., when querying all connections entering a node, it will return conncections
that leave the node with “bidirectional”=``true``).</p>
<p>Certain types of nodes, like the “WWTP” <code class="docutils literal notranslate"><span class="pre">Facility</span></code> and “PowerGrid” <code class="docutils literal notranslate"><span class="pre">Network</span></code> objects above,
can have nodes and connections nested inside them. They take on the same structure as the top level.
For example we could fill in the wastewater treatment facility with some basic processes:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="nt">&quot;WWTP&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;nodes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;ProcessA&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;ProcessB&quot;</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;connections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;AtoB&quot;</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;ProcessA&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Clarification&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;input_contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;UntreatedSewage&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;output_contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PrimaryEffluent&quot;</span><span class="p">,</span>

<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nt">&quot;ProcessB&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;AtoB&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Pipe&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ProcessA&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;destination&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ProcessB&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Electricity&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The following sections will detail how to represent different types of nodes (<a class="reference internal" href="#node-rep"><span class="std std-ref">Representing Nodes</span></a>),
connections (<a class="reference internal" href="#conn-rep"><span class="std std-ref">Representing Connections</span></a>), and tags (<a class="reference internal" href="#tag-rep"><span class="std std-ref">Representing Tags</span></a>)
so that the meaning of fields such as “type”, “num_units”, “contents”, etc. is clear.</p>
<p>Putting all the above together, we have the following valid PyPES JSON representation:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;nodes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;PowerGrid&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;WWTP&quot;</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;connections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;GridToPlant&quot;</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;virtual_tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">    </span><span class="nt">&quot;PowerGrid&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Network&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;Electricity&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;NaturalGas&quot;</span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">        </span><span class="nt">&quot;nodes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">        </span><span class="nt">&quot;connections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;WWTP&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;input_contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;UntreatedSewage&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Electricity&quot;</span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;output_contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;TreatedSewage&quot;</span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;nodes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;ProcessA&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;ProcessB&quot;</span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;connections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;AtoB&quot;</span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;ProcessA&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Clarification&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;input_contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;UntreatedSewage&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;output_contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PrimaryEffluent&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;num_units&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;flowrate&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;min&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;max&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;avg&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;units&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;MGD&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="nt">&quot;ProcessB&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Aeration&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;PrimaryEffluent&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;WasteActivatedSludge&quot;</span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;num_units&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;flowrate&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;min&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;max&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;avg&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1.5</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;units&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;MGD&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;AtoB&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Pipe&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ProcessA&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;destination&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ProcessB&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Electricity&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;GridToPlant&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Wire&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PowerGrid&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;destination&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;WWTP&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Electricity&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;bidirectional&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;grid_to_plant_kW&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Flow&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;units&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;kWh&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Electricity&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;totalized&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A more complex example is avaiable at
<a class="reference external" href="https://github.com/we3lab/pype-schema/tree/main/pype_schema/data/wrrf_sample.json">wrrf_sample.json</a>.</p>
<section id="representing-nodes">
<span id="node-rep"></span><h2><a class="toc-backref" href="#id29" role="doc-backlink">Representing Nodes</a><a class="headerlink" href="#representing-nodes" title="Permalink to this heading"></a></h2>
<p>The most generic structure of a node is outlined above in <a class="reference internal" href="#json-rep"><span class="std std-ref">JSON Representation</span></a>, but that just scratches the surface.
There are numerous types of nodes, and each one has a number attributes.</p>
<p>For example, a <code class="docutils literal notranslate"><span class="pre">Digestion</span></code> object must have <code class="docutils literal notranslate"><span class="pre">id</span></code>, <code class="docutils literal notranslate"><span class="pre">tags</span></code>, <code class="docutils literal notranslate"><span class="pre">input_contents</span></code>, <code class="docutils literal notranslate"><span class="pre">output_contents</span></code>,
<code class="docutils literal notranslate"><span class="pre">flowrate</span></code>, <code class="docutils literal notranslate"><span class="pre">num_units</span></code>, and <code class="docutils literal notranslate"><span class="pre">digester_type</span></code>.</p>
<p>And a complete JSON representation of a digester might be:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="nt">&quot;AnaerobicDigester&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Digestion&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;input_contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ThickenedSludgeBlend&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;output_contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Biogas&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;digester_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Anaerobic&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;volume (cubic meters)&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2500</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;num_units&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;flowrate&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;min&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;max&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;avg&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;units&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;MGD&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Some of the attributes can be left null (as we see in the above example with <code class="docutils literal notranslate"><span class="pre">flowrate</span></code>).
Optional attributes have default values (in the case of <code class="docutils literal notranslate"><span class="pre">flowrate</span></code> the default is <code class="docutils literal notranslate"><span class="pre">null</span></code>),
so it would be equally correct to leave <code class="docutils literal notranslate"><span class="pre">flowrate</span></code> out of the JSON file entirely.
Below are two tables: first is all the <code class="docutils literal notranslate"><span class="pre">Node</span></code> subclasses and the second the attributes of each subclass.</p>
<table class="docutils align-default" id="id21">
<caption><span class="caption-text">Description of all potential attributes of <code class="docutils literal notranslate"><span class="pre">Node</span></code> class and subclasses</span><a class="headerlink" href="#id21" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>id</p></td>
<td><p>str</p></td>
<td><p>unique global identifier for the node in the WRRF database</p></td>
</tr>
<tr class="row-odd"><td><p>tags</p></td>
<td><p>dict of Tag or VirtualTag</p></td>
<td><p>dictionary of all tags directly associated with this node.</p></td>
</tr>
<tr class="row-even"><td><p>input_contents</p></td>
<td><p>list of ContentsType</p></td>
<td><p>Contents entering the node (e.g., biogas or waste activated sludge)</p></td>
</tr>
<tr class="row-odd"><td><p>output_contents</p></td>
<td><p>list of ContentsType</p></td>
<td><p>Contents leaving the node (e.g., biogas or waste activated sludge)</p></td>
</tr>
<tr class="row-even"><td><p>nodes</p></td>
<td><p>dict of Node</p></td>
<td><p>dictionary of all nodes that are children of this node</p></td>
</tr>
<tr class="row-odd"><td><p>connections</p></td>
<td><p>dict of Connection</p></td>
<td><p>dictionary of all connections that are children of this node</p></td>
</tr>
<tr class="row-even"><td><p>elevation</p></td>
<td><p>Quantity <a class="footnote-reference brackets" href="#id17" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p></td>
<td><p>facility/process elevation above sea level</p></td>
</tr>
<tr class="row-odd"><td><p>flow_rate</p></td>
<td><p>tuple of Quantity <a class="footnote-reference brackets" href="#id17" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p></td>
<td><p>min, max, and average flow rate of a single unit</p></td>
</tr>
<tr class="row-even"><td><p>num_units</p></td>
<td><p>int</p></td>
<td><p>number of identical parallel processes</p></td>
</tr>
<tr class="row-odd"><td><p>volume</p></td>
<td><p>Quantity <a class="footnote-reference brackets" href="#id17" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p></td>
<td><p>volume of a single unit of the process</p></td>
</tr>
<tr class="row-even"><td><p>horsepower</p></td>
<td><p>Quantity <a class="footnote-reference brackets" href="#id17" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p></td>
<td><p>maximum horsepower of a single pump</p></td>
</tr>
<tr class="row-odd"><td><p>pump_type</p></td>
<td><p>PumpType <a class="footnote-reference brackets" href="#id19" id="id5" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a></p></td>
<td><p>type of pump (either constant or variable frequency drive (VFD))</p></td>
</tr>
<tr class="row-even"><td><p>pump_curve</p></td>
<td><p>func</p></td>
<td><p>function for the efficiency curve of a pump</p></td>
</tr>
<tr class="row-odd"><td><p>electrical_efficiency</p></td>
<td><p>func</p></td>
<td><p>function for the electrical efficiency of a cogenerator</p></td>
</tr>
<tr class="row-even"><td><p>thermal_efficiency</p></td>
<td><p>func</p></td>
<td><p>function for the thermal efficiency of a boiler or cogenerator</p></td>
</tr>
<tr class="row-odd"><td><p>digester_type</p></td>
<td><p>DigesterType <a class="footnote-reference brackets" href="#id20" id="id6" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a></p></td>
<td><p>type of digester (either aerobic or anaerobic)</p></td>
</tr>
<tr class="row-even"><td><p>gen_capacity</p></td>
<td><p>tuple of Quantity <a class="footnote-reference brackets" href="#id17" id="id7" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p></td>
<td><p>min, max, and average generation capacity of a single engine</p></td>
</tr>
<tr class="row-odd"><td><p>capacity</p></td>
<td><p>Quantity <a class="footnote-reference brackets" href="#id17" id="id8" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p></td>
<td><p>maximum battery storage capacity</p></td>
</tr>
<tr class="row-even"><td><p>discharge_rate</p></td>
<td><p>Quantity <a class="footnote-reference brackets" href="#id17" id="id9" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p></td>
<td><p>maximum discharge rate of the battery</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default" id="id22">
<caption><span class="caption-text">Matrix of attributes for each <code class="docutils literal notranslate"><span class="pre">Node</span></code> subclass</span><a class="headerlink" href="#id22" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"><p>id</p></th>
<th class="head"><p>tags</p></th>
<th class="head"><p>input_contents</p></th>
<th class="head"><p>output_contents</p></th>
<th class="head"><p>nodes</p></th>
<th class="head"><p>connections</p></th>
<th class="head"><p>elevation</p></th>
<th class="head"><p>flow_rate</p></th>
<th class="head"><p>num_units</p></th>
<th class="head"><p>volume</p></th>
<th class="head"><p>horsepower</p></th>
<th class="head"><p>pump_type</p></th>
<th class="head"><p>pump_curve</p></th>
<th class="head"><p>electrical_efficiency</p></th>
<th class="head"><p>thermal_efficiency</p></th>
<th class="head"><p>digester_type</p></th>
<th class="head"><p>gen_capacity</p></th>
<th class="head"><p>capacity</p></th>
<th class="head"><p>discharge_rate</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Node</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Network</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Facility</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Pump</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Tank</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Reservoir</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Screening</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Clarification</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Aeration</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Filtration</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Chlorination</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Thickening</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Digestion</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Conditioning</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Cogeneration</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td></td>
<td><p>✓</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Boiler</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>✓</p></td>
<td></td>
<td><p>✓</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Flaring</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Battery</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
</tr>
</tbody>
</table>
<p>An example of how to define all the potential attributes is available in
<a class="reference external" href="https://github.com/we3lab/pype-schema/tree/main/pype_schema/data/wrrf_sample.json">wrrf_sample.json</a>.</p>
</section>
<section id="representing-connections">
<span id="conn-rep"></span><h2><a class="toc-backref" href="#id30" role="doc-backlink">Representing Connections</a><a class="headerlink" href="#representing-connections" title="Permalink to this heading"></a></h2>
<p>The most generic structure of a node is outlined above in <a class="reference internal" href="#json-rep"><span class="std std-ref">JSON Representation</span></a>, but that just scratches the surface.
There are numerous types of connections, and each one has a number attributes.</p>
<table class="docutils align-default" id="id23">
<caption><span class="caption-text">Description of all potential attributes of <code class="docutils literal notranslate"><span class="pre">Connection</span></code> class and subclasses</span><a class="headerlink" href="#id23" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>id</p></td>
<td><p>str</p></td>
<td><p>unique global identifier for the node in the WRRF database</p></td>
</tr>
<tr class="row-odd"><td><p>tags</p></td>
<td><p>dict of Tag or VirtualTag</p></td>
<td><p>dictionary of all tags directly associated with this node.</p></td>
</tr>
<tr class="row-even"><td><p>contents</p></td>
<td><p>list of ContentsType</p></td>
<td><p>Contents moving through the connection (e.g., biogas or waste activated sludge)</p></td>
</tr>
<tr class="row-odd"><td><p>source</p></td>
<td><p>Node</p></td>
<td><p>Starting point of the connection</p></td>
</tr>
<tr class="row-even"><td><p>destination</p></td>
<td><p>Node</p></td>
<td><p>Endpoint of the connection</p></td>
</tr>
<tr class="row-odd"><td><p>bidirectional</p></td>
<td><p>bool</p></td>
<td><p>whether flow can go from destination to source. False by default</p></td>
</tr>
<tr class="row-even"><td><p>exit_point</p></td>
<td><p>Node</p></td>
<td><p>The child node from which this connection leaves its source.</p></td>
</tr>
<tr class="row-odd"><td><p>entry_point</p></td>
<td><p>Node</p></td>
<td><p>The child node at which this connection enters its destination.</p></td>
</tr>
<tr class="row-even"><td><p>flow_rate</p></td>
<td><p>tuple of Quantity <a class="footnote-reference brackets" href="#id17" id="id11" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p></td>
<td><p>min, max, and average flow rate of a single unit</p></td>
</tr>
<tr class="row-odd"><td><p>diameter</p></td>
<td><p>Quantity <a class="footnote-reference brackets" href="#id17" id="id12" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p></td>
<td><p>inner diameter of a pipe</p></td>
</tr>
<tr class="row-even"><td><p>friction_coeff</p></td>
<td><p>float</p></td>
<td><p>Friction coefficient for a pipe</p></td>
</tr>
<tr class="row-odd"><td><p>pressure</p></td>
<td><p>Quantity <a class="footnote-reference brackets" href="#id17" id="id13" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p></td>
<td><p>Minimum, maximum, and average pressure in a pipe</p></td>
</tr>
<tr class="row-even"><td><p>heating_values</p></td>
<td><p>tuple of Quantity <a class="footnote-reference brackets" href="#id17" id="id14" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p></td>
<td><p>The lower and higher heating values of the gas in the pipe.</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default" id="id24">
<caption><span class="caption-text">Matrix of attributes for each <code class="docutils literal notranslate"><span class="pre">Connection</span></code> subclass</span><a class="headerlink" href="#id24" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"><p>id</p></th>
<th class="head"><p>tags</p></th>
<th class="head"><p>contents</p></th>
<th class="head"><p>source</p></th>
<th class="head"><p>destination</p></th>
<th class="head"><p>bidirectional</p></th>
<th class="head"><p>exit_point</p></th>
<th class="head"><p>entry_point</p></th>
<th class="head"><p>flow_rate</p></th>
<th class="head"><p>diameter</p></th>
<th class="head"><p>friction_coeff</p></th>
<th class="head"><p>pressure</p></th>
<th class="head"><p>heating_values</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Connection</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Wire</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Pipe</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
</tr>
</tbody>
</table>
<p>An example of how to define all the potential attributes is available in
<a class="reference external" href="https://github.com/we3lab/pype-schema/tree/main/pype_schema/data/wrrf_sample.json">wrrf_sample.json</a>.</p>
</section>
<section id="representing-tags">
<span id="tag-rep"></span><h2><a class="toc-backref" href="#id31" role="doc-backlink">Representing Tags</a><a class="headerlink" href="#representing-tags" title="Permalink to this heading"></a></h2>
<p>Both nodes and connections can have tags nested inside them.
These tags represent sensors or data points at the facility.
Two types of tags exist in PyPES: <code class="docutils literal notranslate"><span class="pre">Tag</span></code> and <code class="docutils literal notranslate"><span class="pre">VirtualTag</span></code> objects.</p>
<section id="basic-tag">
<h3><a class="toc-backref" href="#id32" role="doc-backlink">Basic <code class="docutils literal notranslate"><span class="pre">Tag</span></code></a><a class="headerlink" href="#basic-tag" title="Permalink to this heading"></a></h3>
<p>As with other objects, the <code class="docutils literal notranslate"><span class="pre">tags</span></code> dictionary is nested within the corresponding <code class="docutils literal notranslate"><span class="pre">Node</span></code> or <code class="docutils literal notranslate"><span class="pre">Connection</span></code>,
and the keys are the string IDs for the facility’s database column names.</p>
<p>The JSON format to represent a single tag in PyPES is as follows:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="nt">&quot;TankVolume&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Volume&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;units&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gallons&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FatOilGrease&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">type</span></code> is a string from <a class="reference internal" href="#tag-type"><span class="std std-ref">TagType Enum</span></a>, <code class="docutils literal notranslate"><span class="pre">units</span></code> is a <a class="reference external" href="https://pint.readthedocs.io/en/stable/">Pint</a> parseable string,
and <code class="docutils literal notranslate"><span class="pre">contents_type</span></code> a string form <a class="reference internal" href="#contents-type"><span class="std std-ref">ContentsType Enum</span></a>.</p>
<p>Multiple tags can be attached to a node. For example:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="nt">&quot;FOGTank&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Tank&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FatOilGrease&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;TankVolume&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Volume&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;units&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gallons&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FatOilGrease&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;TankLevel&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Level&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;units&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;feet&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FatOilGrease&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="virtualtag">
<span id="vtag-rep"></span><h3><a class="toc-backref" href="#id33" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">VirtualTag</span></code></a><a class="headerlink" href="#virtualtag" title="Permalink to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">VirtualTag</span></code> class provides users with a powerful way to combine data from existing sensors to create new “virtual” sensors.
Specifically, a user can define their own function or lambda expression that takes in other <code class="docutils literal notranslate"><span class="pre">Tag</span></code> or <code class="docutils literal notranslate"><span class="pre">VirtualTag</span></code> objects and
computes the resulting data.</p>
<p>These combinations can be quite simple. For example, let’s calculate the cogenerator efficiency from the following plant configuration:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="nt">&quot;WWTP&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;nodes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;AnaerobicDigester&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Cogenerator&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;VirtualDemand&quot;</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;connections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;CogenElecToFacility&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;DigesterToCogenerator&quot;</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;virtual_tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="nt">&quot;Cogenerator&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;Cogenerator&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Cogeneration&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;num_units&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;input_contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;Biogas&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;NaturalGas&quot;</span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;output_contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;Electricity&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Heat&quot;</span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;AnaerobicDigester&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Digestion&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;input_contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ThickenedSludgeBlend&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;output_contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Biogas&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;digester_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Anaerobic&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;volume (cubic meters)&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2500</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;num_units&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;VirtualDemand&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Network&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;Electricity&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Heat&quot;</span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">        </span><span class="nt">&quot;nodes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">        </span><span class="nt">&quot;connections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;CogenElecToFacility&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Wire&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Cogenerator&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;destination&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;VirtualDemand&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Electricity&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;bidirectional&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;ElectricityGeneration&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Flow&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;units&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;kilowatt&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Electricity&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;totalized&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;DigesterToCogenerator&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Pipe&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AnaerobicDigester&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;destination&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Cogenerator&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Biogas&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;heating_values&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;lower&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;higher&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">700</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;units&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;BTU/scf&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;Digester1GasFlow&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Flow&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;units&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SCFM&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;source_unit_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;dest_unit_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;total&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Biogas&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;totalized&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="nt">&quot;Digester2GasFlow&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Flow&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;units&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SCFM&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;source_unit_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;dest_unit_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;total&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Biogas&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;totalized&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>First, we need to add a <code class="docutils literal notranslate"><span class="pre">VirtualTag</span></code> that sums the biogas flows into the cogenerator.
Since the child <code class="docutils literal notranslate"><span class="pre">Tag</span></code> objects are all inside “DigesterToCogenerator” <code class="docutils literal notranslate"><span class="pre">Pipe</span></code>, this can be done
at the lowest level:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="nt">&quot;DigesterToCogenerator&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Pipe&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AnaerobicDigester&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;destination&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Cogenerator&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Biogas&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;heating_values&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;lower&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;higher&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">700</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;units&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;BTU/scf&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;Digester1GasFlow&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Flow&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;units&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SCFM&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;source_unit_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;dest_unit_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;total&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Biogas&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;totalized&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="nt">&quot;Digester2GasFlow&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Flow&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;units&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SCFM&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;source_unit_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;dest_unit_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;total&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Biogas&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;totalized&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;Digester3GasFlow&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Flow&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;units&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SCFM&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;source_unit_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;dest_unit_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;total&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Biogas&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;totalized&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;virtual_tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;BiogasProductionCombined&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;Digester1GasFlow&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Digester2GasFlow&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Digester3GasFlow&quot;</span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;operations&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;lambda x, y, z: x + y + z&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;units&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SCFM&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Then, another <code class="docutils literal notranslate"><span class="pre">VirtualTag</span></code> could be used to divide the biogas production by electricity generation.
This tag would be located at the facility level since it is combining data from two different <code class="docutils literal notranslate"><span class="pre">Connection</span></code> objects.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="nt">&quot;WWTP&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;nodes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;AnaerobicDigester&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Cogenerator&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;VirtualDemand&quot;</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;connections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;CogenElecToFacility&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;DigesterToCogenerator&quot;</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;virtual_tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;ElectricalEfficiency&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;BiogasProductionCombined&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;ElectricityGeneration&quot;</span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;operations&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;lambda x, y: x / y&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;units&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SCFM / kW&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="docutils align-default" id="id25">
<caption><span class="caption-text">Members of <code class="docutils literal notranslate"><span class="pre">VirtualTag</span></code> class</span><a class="headerlink" href="#id25" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>id</p></td>
<td><p>str</p></td>
<td><p>unique global identifier for the tag in the WRRF database</p></td>
</tr>
<tr class="row-odd"><td><p>units</p></td>
<td><p>Unit <a class="footnote-reference brackets" href="#id17" id="id16" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p></td>
<td><p>Units for the tag. Can be null, e.g., if a Boolean variable.</p></td>
</tr>
<tr class="row-even"><td><p>tag_type</p></td>
<td><p>TagType</p></td>
<td><p>Type of data saved under the tag. E.g., InfluentFlow or RunTime.</p></td>
</tr>
<tr class="row-odd"><td><p>tags</p></td>
<td><p>list of Tag</p></td>
<td><p>tags to combine according to specified operations</p></td>
</tr>
<tr class="row-even"><td><p>unary_operations</p></td>
<td><p>list of str</p></td>
<td><p>Unary operations to apply before combining tags</p></td>
</tr>
<tr class="row-odd"><td><p>binary_operations</p></td>
<td><p>list or str</p></td>
<td><p>Binary operations to apply before combining tags</p></td>
</tr>
<tr class="row-even"><td><p>parent_id</p></td>
<td><p>str</p></td>
<td><p>Identifier for the parent object (either a Node or Connection)</p></td>
</tr>
<tr class="row-odd"><td><p>totalized</p></td>
<td><p>bool</p></td>
<td><p>True if data is totalized, or a running summation reset periodically (usually daily). False otherwise.</p></td>
</tr>
<tr class="row-even"><td><p>contents</p></td>
<td><p>ContentsType</p></td>
<td><p>Contents measured by the tag (e.g., biogas or primary effluent)</p></td>
</tr>
</tbody>
</table>
</section>
<section id="tagtype-enum">
<span id="tag-type"></span><h3><a class="toc-backref" href="#id34" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">TagType</span></code> Enum</a><a class="headerlink" href="#tagtype-enum" title="Permalink to this heading"></a></h3>
<table class="docutils align-default" id="id26">
<caption><span class="caption-text">Members of <code class="docutils literal notranslate"><span class="pre">TagType</span></code> enum</span><a class="headerlink" href="#id26" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Member</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default Units</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Flow</p></td>
<td><p>flow of any contents (electricity, water, gas, sludge)</p></td>
<td><p>kW (electricity) <cite>or</cite> m<sup>3</sup> d<sup>-1</sup> (fluids)</p></td>
</tr>
<tr class="row-odd"><td><p>Volume</p></td>
<td><p>volume of fluid in a tank</p></td>
<td><p>m<sup>3</sup></p></td>
</tr>
<tr class="row-even"><td><p>Level</p></td>
<td><p>height of fluid in a tank</p></td>
<td><p>m</p></td>
</tr>
<tr class="row-odd"><td><p>Pressure</p></td>
<td><p>force per unit area</p></td>
<td><p>Pa</p></td>
</tr>
<tr class="row-even"><td><p>Temperature</p></td>
<td><p>average kinetic energy of particles</p></td>
<td><p>K</p></td>
</tr>
<tr class="row-odd"><td><p>RunTime</p></td>
<td><p>binary variable indicating if equipment is on (1) or off (0)</p></td>
<td><p>unitless</p></td>
</tr>
<tr class="row-even"><td><p>RunStatus</p></td>
<td><p>fraction of time equipment is on</p></td>
<td><p>unitless</p></td>
</tr>
<tr class="row-odd"><td><p>VSS</p></td>
<td><p>concentration of volatile suspended solids</p></td>
<td><p>mg L<sup>-1</sup></p></td>
</tr>
<tr class="row-even"><td><p>TSS</p></td>
<td><p>concentration of total suspended solids</p></td>
<td><p>mg L<sup>-1</sup></p></td>
</tr>
<tr class="row-odd"><td><p>TDS</p></td>
<td><p>concentration of total dissolved solids</p></td>
<td><p>mg L<sup>-1</sup></p></td>
</tr>
<tr class="row-even"><td><p>COD</p></td>
<td><p>chemical oxygen demand</p></td>
<td><p>mg L<sup>-1</sup></p></td>
</tr>
<tr class="row-odd"><td><p>BOD</p></td>
<td><p>biochemical oxygen demand</p></td>
<td><p>mg L<sup>-1</sup></p></td>
</tr>
<tr class="row-even"><td><p>pH</p></td>
<td><p>measure of acidity</p></td>
<td><p>unitless</p></td>
</tr>
<tr class="row-odd"><td><p>Conductivity</p></td>
<td><p>ease with which an electric charge moves</p></td>
<td><p>Siemens m<sup>-1</sup></p></td>
</tr>
<tr class="row-even"><td><p>Turbidity</p></td>
<td><p>the opaqueness of a fluid</p></td>
<td><p>NTU</p></td>
</tr>
<tr class="row-odd"><td><p>Rotation</p></td>
<td><p>number of revolutions (useful for motors/pumps)</p></td>
<td><p>RPM</p></td>
</tr>
<tr class="row-even"><td><p>Efficiency</p></td>
<td><p>fraction of a quantity retained during a process (e.g., conversion of heat to electricity)</p></td>
<td><p>unitless</p></td>
</tr>
<tr class="row-odd"><td><p>StateOfCharge</p></td>
<td><p>fraction of max capacity currently available in a battery</p></td>
<td><p>unitless</p></td>
</tr>
<tr class="row-even"><td><p>InFlow</p></td>
<td><p>flow into a node</p></td>
<td><p>kW (electricity) <cite>or</cite> m<sup>3</sup> d<sup>-1</sup> (fluids)</p></td>
</tr>
<tr class="row-odd"><td><p>OutFlow</p></td>
<td><p>flow out of a node</p></td>
<td><p>kW (electricity) <cite>or</cite> m<sup>3</sup> d<sup>-1</sup> (fluids)</p></td>
</tr>
<tr class="row-even"><td><p>NetFlow</p></td>
<td><p>net flow (i.e., flow in minus flow out) of a node</p></td>
<td><p>kW (electricity) <cite>or</cite> m<sup>3</sup> d<sup>-1</sup> (fluids)</p></td>
</tr>
<tr class="row-odd"><td><p>Speed</p></td>
<td><p>the speed of a pump expressed as a percentage</p></td>
<td><p>unitless</p></td>
</tr>
<tr class="row-even"><td><p>Frequency</p></td>
<td><p>frequency of electricity for devices like a variable-frequency drive (VFD) pump</p></td>
<td><p>Hz</p></td>
</tr>
<tr class="row-odd"><td><p>Current</p></td>
<td><p>the current draw of an electrical device</p></td>
<td><p>A</p></td>
</tr>
<tr class="row-even"><td><p>Voltage</p></td>
<td><p>the voltage of an electrical device</p></td>
<td><p>V</p></td>
</tr>
<tr class="row-odd"><td><p>Concentration</p></td>
<td><p>concentration of a solute in a fluid</p></td>
<td><p>mg / L</p></td>
</tr>
<tr class="row-even"><td><p>SetPoint</p></td>
<td><p>control set point for an actuator (e.g., pump flow rate or tank level)</p></td>
<td><p>varies by actuator</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="contentstype-enum">
<span id="contents-type"></span><h2><a class="toc-backref" href="#id35" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ContentsType</span></code> Enum</a><a class="headerlink" href="#contentstype-enum" title="Permalink to this heading"></a></h2>
<p>A fundamental facet of process engineering is the conversion of reactants to products.
In PyPES, these changes are represented by the <code class="docutils literal notranslate"><span class="pre">ContentsType</span></code> enum. For consistency,
both <code class="docutils literal notranslate"><span class="pre">input_contents</span></code> and <code class="docutils literal notranslate"><span class="pre">output_contents</span></code> are represented as lists even when there
is only a single member. For example, a <code class="docutils literal notranslate"><span class="pre">Cogeneration</span></code> object typically has
<code class="docutils literal notranslate"><span class="pre">input_contents=[ContentsType.Biogas,</span> <span class="pre">ContentsType.NaturalGas]</span></code> and <code class="docutils literal notranslate"><span class="pre">output_contents=[ContentsType.Electricity]</span></code>
Each node has distinct input and output contents, while a connection is assumed to have a single
<code class="docutils literal notranslate"><span class="pre">ContentsType</span></code> list since it is simply transporting the contents.</p>
<p>As a shorthand, instead of specifying <code class="docutils literal notranslate"><span class="pre">input_contents</span></code> and <code class="docutils literal notranslate"><span class="pre">output_contents</span></code> separately,
the user can simply enter <code class="docutils literal notranslate"><span class="pre">contents</span></code> and the value will be set to both attributes.
I.e., the below are two ways to represent the same node in JSON format:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="nt">&quot;PowerGrid&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Network&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;Electricity&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;NaturalGas&quot;</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">    </span><span class="nt">&quot;nodes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">    </span><span class="nt">&quot;connections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="nt">&quot;PowerGrid&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Network&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;input_contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;Electricity&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;NaturalGas&quot;</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;output_contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;Electricity&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;NaturalGas&quot;</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">    </span><span class="nt">&quot;nodes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">    </span><span class="nt">&quot;connections&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Supported <code class="docutils literal notranslate"><span class="pre">ContentsType</span></code> values are shown in the table below.</p>
<table class="docutils align-default" id="id27">
<caption><span class="caption-text">Members of <code class="docutils literal notranslate"><span class="pre">ContentsType</span></code> enum</span><a class="headerlink" href="#id27" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>hline Member</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>UntreatedSewage</p></td>
<td><p>raw wastewater before any treatment</p></td>
</tr>
<tr class="row-odd"><td><p>PrimaryEffluent</p></td>
<td><p>liquid outflow from primary clarification</p></td>
</tr>
<tr class="row-even"><td><p>SecondaryEffluent</p></td>
<td><p>liquid outflow from secondary clarification</p></td>
</tr>
<tr class="row-odd"><td><p>TertiaryEffluent</p></td>
<td><p>outflow from tertiary treatment</p></td>
</tr>
<tr class="row-even"><td><p>TreatedSewage</p></td>
<td><p>fully treated (i.e., disinfected) plant effluent</p></td>
</tr>
<tr class="row-odd"><td><p>DrinkingWater</p></td>
<td><p>conventionally treated or desalinated water</p></td>
</tr>
<tr class="row-even"><td><p>PotableReuse</p></td>
<td><p>water recovered at potable standards</p></td>
</tr>
<tr class="row-odd"><td><p>NonpotableReuse</p></td>
<td><p>water recovered at non-potable standards</p></td>
</tr>
<tr class="row-even"><td><p>Biogas</p></td>
<td><p>mix of CH<sub>4</sub> and CO<sub>2</sub> produced by digesters</p></td>
</tr>
<tr class="row-odd"><td><p>NaturalGas</p></td>
<td><p>fossil CH<sub>4</sub> purchased from the grid</p></td>
</tr>
<tr class="row-even"><td><p>GasBlend</p></td>
<td><p>a blend of fossil natural gas and biogas</p></td>
</tr>
<tr class="row-odd"><td><p>FatOilGrease</p></td>
<td><p>fats, oils, and greases (FOG)</p></td>
</tr>
<tr class="row-even"><td><p>PrimarySludge</p></td>
<td><p>settled solids from primary clarification</p></td>
</tr>
<tr class="row-odd"><td><p>TPS</p></td>
<td><p>thickened primary sludge</p></td>
</tr>
<tr class="row-even"><td><p>WasteActivatedSludge</p></td>
<td><p>settled solids from secondary clarification</p></td>
</tr>
<tr class="row-odd"><td><p>TWAS</p></td>
<td><p>thickened waste activated sludge</p></td>
</tr>
<tr class="row-even"><td><p>Scum</p></td>
<td><p>solids skimmed off the top of aeration basins</p></td>
</tr>
<tr class="row-odd"><td><p>FoodWaste</p></td>
<td><p>organic food waste delivered to the facility</p></td>
</tr>
<tr class="row-even"><td><p>SludgeBlend</p></td>
<td><p>a mix of unthickened solids (e.g., scum and primary sludge)</p></td>
</tr>
<tr class="row-odd"><td><p>ThickenedSludgeBlend</p></td>
<td><p>a mix of thickened solids (e.g., TPS and TWAS)</p></td>
</tr>
<tr class="row-even"><td><p>Electricity</p></td>
<td><p>includes grid purchases and on-site generation</p></td>
</tr>
<tr class="row-odd"><td><p>Brine</p></td>
<td><p>saline waste stream from desalination process</p></td>
</tr>
<tr class="row-even"><td><p>Seawater</p></td>
<td><p>water from the ocean</p></td>
</tr>
<tr class="row-odd"><td><p>SurfaceWater</p></td>
<td><p>water from rivers, streams, or lakes</p></td>
</tr>
<tr class="row-even"><td><p>Groundwater</p></td>
<td><p>water pumped from underground</p></td>
</tr>
<tr class="row-odd"><td><p>Stormwater</p></td>
<td><p>stormwater runoff (for separated drainage systems)</p></td>
</tr>
<tr class="row-even"><td><p>Heat</p></td>
<td><p>heat energy generated by on-site processes</p></td>
</tr>
<tr class="row-odd"><td><p>Oil</p></td>
<td><p>oil of any form (e.g., combustion or lubrication)</p></td>
</tr>
<tr class="row-even"><td><p>Grease</p></td>
<td><p>grease for any purpose (e.g., digestion or lubrication)</p></td>
</tr>
</tbody>
</table>
</section>
<section id="num-units-attribute">
<span id="num-units"></span><h2><a class="toc-backref" href="#id36" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">num_units</span></code> Attribute</a><a class="headerlink" href="#num-units-attribute" title="Permalink to this heading"></a></h2>
<p>There are often identical parallel processes in a treatment train.
The <code class="docutils literal notranslate"><span class="pre">num_units</span></code> attribute exists to ease the effort needed to represent these identical objects.</p>
<p>For example, the anaerobic digester from <a class="reference internal" href="#vtag-rep"><span class="std std-ref">VirtualTag</span></a> was specified with three digesters in parallel.
That example shows how flow from the three digesters can be tracked separately by specifying a
<code class="docutils literal notranslate"><span class="pre">source_unit_id</span></code> or <code class="docutils literal notranslate"><span class="pre">dest_unit_id</span></code> for each <code class="docutils literal notranslate"><span class="pre">Tag</span></code>.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="nt">&quot;num_units&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span>
</pre></div>
</div>
<p>By default <code class="docutils literal notranslate"><span class="pre">num_units</span></code> is set to 1, meaning there is only a single instance and no parallel processes.</p>
</section>
<section id="elevation-attribute">
<span id="elevation"></span><h2><a class="toc-backref" href="#id37" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">elevation</span></code> Attribute</a><a class="headerlink" href="#elevation-attribute" title="Permalink to this heading"></a></h2>
<p>Elevations can be assigned to some nodes to help calculate the headloss or pressure drop throughout the system.
Currently, elevation is only supported by <code class="docutils literal notranslate"><span class="pre">Facility</span></code>, <code class="docutils literal notranslate"><span class="pre">Pump</span></code>, <code class="docutils literal notranslate"><span class="pre">Tank</span></code>, and <code class="docutils literal notranslate"><span class="pre">Reservoir</span></code> nodes, but that could
easily be extended in the future.</p>
<p>By default the <code class="docutils literal notranslate"><span class="pre">elevation</span></code> attribute is null. To assign an elevation to a node, simply add the following entry to its JSON dictionary:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="nt">&quot;elevation (meters)&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span>
</pre></div>
</div>
<p>Currently, the units are hardcoded as meters, but this will soon be modified to match the dictionary-style unit-parsing
from <a class="reference internal" href="#flowrate"><span class="std std-ref">flow_rate Attribute</span></a> and <a class="reference internal" href="#gen-capacity"><span class="std std-ref">gen_capacity Attribute</span></a>.</p>
</section>
<section id="volume-attribute">
<span id="volume"></span><h2><a class="toc-backref" href="#id38" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">volume</span></code> Attribute</a><a class="headerlink" href="#volume-attribute" title="Permalink to this heading"></a></h2>
<p>Elevations can be assigned to some nodes to help calculate the headloss or pressure drop throughout the system.
Currently, elevation is only supported by <code class="docutils literal notranslate"><span class="pre">Tank</span></code>, <code class="docutils literal notranslate"><span class="pre">Reservoir</span></code>, <code class="docutils literal notranslate"><span class="pre">Aeration</span></code>, <code class="docutils literal notranslate"><span class="pre">Filtration</span></code>, <code class="docutils literal notranslate"><span class="pre">Chlorination</span></code>, <code class="docutils literal notranslate"><span class="pre">Thickening</span></code>,
<code class="docutils literal notranslate"><span class="pre">Digestion</span></code>, and <code class="docutils literal notranslate"><span class="pre">Conditioning</span></code> nodes, but that could easily be extended in the future.</p>
<p>By default the <code class="docutils literal notranslate"><span class="pre">volume</span></code> attribute is null. To assign a volume to a node, simply add the following entry to its JSON dictionary:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="nt">&quot;volume (cubic meters)&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span>
</pre></div>
</div>
<p>Currently, the units are hardcoded as cubic meters, but this will soon be modified to match the dictionary-style unit-parsing
from <a class="reference internal" href="#flowrate"><span class="std std-ref">flow_rate Attribute</span></a> and <a class="reference internal" href="#gen-capacity"><span class="std std-ref">gen_capacity Attribute</span></a>.</p>
</section>
<section id="flow-rate-attribute">
<span id="flowrate"></span><h2><a class="toc-backref" href="#id39" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">flow_rate</span></code> Attribute</a><a class="headerlink" href="#flow-rate-attribute" title="Permalink to this heading"></a></h2>
<p>Flow rates in PyPES are defined as tuples of the form <code class="docutils literal notranslate"><span class="pre">(min,</span> <span class="pre">max,</span> <span class="pre">avg)</span></code>.
Any member of the tuple can be left as <code class="docutils literal notranslate"><span class="pre">None</span></code>. For example, if there is only a minimum of maximum flow rate.
Units must be specified (e.g., m<sup>3</sup> / day or ft<sup>3</sup> / min) as text strings.
The average flow rate can also be used to keep track of design flow, which will be between min and max.
Note that this is the flow rate for a <strong>single</strong> unit in a parallel process,
so the combined flow rate would require multiplying by <code class="docutils literal notranslate"><span class="pre">num_units</span></code>.</p>
<p>Both <cite>“flowrate”</cite> and <cite>“flow_rate”</cite> are acceptable keys to use in the JSON representation.
So the following two represent the same <code class="docutils literal notranslate"><span class="pre">flow_rate</span></code> attribute:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="nt">&quot;flowrate&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;min&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;max&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;avg&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;units&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;m3pd&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="nt">&quot;flowrate&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;min&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;max&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;avg&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;units&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;m3pd&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Outside of JSON, <a class="reference external" href="https://we3lab.github.io/pype-schema/node.html#pype_schema.node.Node.select_objs">node.Node.set_flow_rate</a>
can be used to change a <code class="docutils literal notranslate"><span class="pre">Node</span></code> or <code class="docutils literal notranslate"><span class="pre">Connection</span></code> objects <code class="docutils literal notranslate"><span class="pre">flow_rate</span></code> attribute.</p>
</section>
<section id="gen-capacity-attribute">
<span id="gen-capacity"></span><h2><a class="toc-backref" href="#id40" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">gen_capacity</span></code> Attribute</a><a class="headerlink" href="#gen-capacity-attribute" title="Permalink to this heading"></a></h2>
<p>Generation capacity of a boiler or cogenerator is represented as a <code class="docutils literal notranslate"><span class="pre">(min,</span> <span class="pre">max,</span> <span class="pre">avg)</span></code> tuple just like the <a class="reference internal" href="#flowrate"><span class="std std-ref">flow_rate Attribute</span></a>:.
Note that this is the generation capacity for a <strong>single</strong> engine if there are multiple,
so the combined flow rate would require multiplying by <code class="docutils literal notranslate"><span class="pre">num_units</span></code>.</p>
<p>Both <cite>“generation_capacity”</cite> and <cite>“gen_capacity”</cite> are acceptable keys to use in the JSON representation.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="nt">&quot;generation_capacity&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;min&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;max&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">650</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;avg&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">450</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;units&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;kW&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Since both heat and electricity are forms of energy, the generation capacity for the <code class="docutils literal notranslate"><span class="pre">Cogenerator</span></code> is tied to the electricity generation
and for the <code class="docutils literal notranslate"><span class="pre">Boiler</span></code> to heat generation. Then, for the <code class="docutils literal notranslate"><span class="pre">Cogenerator</span></code> the heat generation capacity can be calculated by converting from
electricity to heat using <code class="docutils literal notranslate"><span class="pre">electrical_efficiency</span></code> and <code class="docutils literal notranslate"><span class="pre">thermal_efficiency</span></code>.</p>
</section>
<section id="heating-values-attribute">
<span id="heat-val"></span><h2><a class="toc-backref" href="#id41" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">heating_values</span></code> Attribute</a><a class="headerlink" href="#heating-values-attribute" title="Permalink to this heading"></a></h2>
</section>
<section id="capacity-attribute">
<span id="capacity"></span><h2><a class="toc-backref" href="#id42" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">capacity</span></code> Attribute</a><a class="headerlink" href="#capacity-attribute" title="Permalink to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">capacity</span></code> attribute provides the maximum storage capacity for a <code class="docutils literal notranslate"><span class="pre">Battery</span></code> object.
To assign a value to the <code class="docutils literal notranslate"><span class="pre">capacity</span></code> in JSON:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="nt">&quot;capacity (kWh)&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2000</span>
</pre></div>
</div>
<p>Currently, the units are hardcoded as kilowatt-hours, but this will soon be modified to match the dictionary-style unit-parsing
from <a class="reference internal" href="#flowrate"><span class="std std-ref">flow_rate Attribute</span></a> and <a class="reference internal" href="#gen-capacity"><span class="std std-ref">gen_capacity Attribute</span></a>.</p>
</section>
<section id="discharge-rate-attribute">
<span id="discharge-rate"></span><h2><a class="toc-backref" href="#id43" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">discharge_rate</span></code> Attribute</a><a class="headerlink" href="#discharge-rate-attribute" title="Permalink to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">discharge_rate</span></code> attribute provides the maximum rate of discharge
(and at the moment charge, but these will be separated in the future) for a <code class="docutils literal notranslate"><span class="pre">Battery</span></code> object.
To assign a value to the <code class="docutils literal notranslate"><span class="pre">discharge_rate</span></code> in JSON:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="nt">&quot;discharge_rate (kW)&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span>
</pre></div>
</div>
<p>Currently, the units are hardcoded as kilowatts, but this will soon be modified to match the dictionary-style unit-parsing
from <a class="reference internal" href="#flowrate"><span class="std std-ref">flow_rate Attribute</span></a> and <a class="reference internal" href="#gen-capacity"><span class="std std-ref">gen_capacity Attribute</span></a>.</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id17" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id1">1</a>,<a role="doc-backlink" href="#id2">2</a>,<a role="doc-backlink" href="#id3">3</a>,<a role="doc-backlink" href="#id4">4</a>,<a role="doc-backlink" href="#id7">5</a>,<a role="doc-backlink" href="#id8">6</a>,<a role="doc-backlink" href="#id9">7</a>,<a role="doc-backlink" href="#id11">8</a>,<a role="doc-backlink" href="#id12">9</a>,<a role="doc-backlink" href="#id13">10</a>,<a role="doc-backlink" href="#id14">11</a>,<a role="doc-backlink" href="#id16">12</a>)</span>
<p>from <a class="reference external" href="https://pint.readthedocs.io/en/stable/">Pint</a></p>
</aside>
<aside class="footnote brackets" id="id19" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id5">2</a><span class="fn-bracket">]</span></span>
<p><code class="docutils literal notranslate"><span class="pre">PumpType</span></code> is an enum that contains two members: <code class="docutils literal notranslate"><span class="pre">Constant</span></code> or <code class="docutils literal notranslate"><span class="pre">VFD</span></code></p>
</aside>
<aside class="footnote brackets" id="id20" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id6">3</a><span class="fn-bracket">]</span></span>
<p><code class="docutils literal notranslate"><span class="pre">DigesterType</span></code> is an enum that contains two members: <code class="docutils literal notranslate"><span class="pre">Aerobic</span></code> or <code class="docutils literal notranslate"><span class="pre">Anaerobic</span></code></p>
</aside>
</aside>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="hello.html" class="btn btn-neutral float-left" title="Getting Started" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="advanced.html" class="btn btn-neutral float-right" title="Advanced Features" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, WE3 Lab.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>